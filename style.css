:root{
  --bg:#0b0b0d;
  --card:#141418;
  --accent:#d4af37;
  --muted:#9aa0a6;
  --gap:32px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:#eef0f2;
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:32px;
}

.wrap{max-width:1200px;margin:0 auto;}
header{margin-bottom:18px}
h1{font-size:28px;margin:0 0 6px}
.subtitle{color:var(--muted);margin:0 0 18px}

/* Кнопка */
.controls{display:flex;justify-content:center;margin-bottom:20px}
.btn{
  background:linear-gradient(180deg,var(--accent),#b78924);
  color:#000;
  border:none;
  padding:14px 36px;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 12px 30px rgba(212,175,55,.18);
}
.btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}

/* ПОЛЕ КАРТ: сетка с явными отступами */
.cards{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--gap);
  align-items: start;
  padding: 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  border-radius:16px;
}

/* КАРТА */
.card{
  height: 180px;
  border-radius:18px;
  perspective:1200px;
  position:relative; /* важно для FLIP расчётов */
  will-change: transform;
  display:block;
}

.card-inner{
  width:100%;
  height:100%;
  border-radius:18px;
  background:var(--card);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:16px;
  transform-style:preserve-3d;
  transition: transform 660ms cubic-bezier(.22,1,.36,1), box-shadow 360ms ease;
  box-shadow: 0 8px 30px rgba(0,0,0,.45);
}

/* стороны */
.card-face{position:absolute;inset:0;border-radius:18px;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;padding:18px}
.front{font-size:28px;font-weight:700;background:linear-gradient(120deg,#1b1b1f,#0f0f12);color:#f6f6f6}
.back{transform:rotateY(180deg);font-size:15px;line-height:1.45;background:linear-gradient(120deg,#163a2d,#0d1c14);color:#e6efe8;padding:20px}

/* ANIMATION: shuffle keyframes.
   Each card will get CSS variables --tx, --ty, --rot and --delay,
   animation moves to that offset and back (0%->50%->100%). */
@keyframes shuffle {
  0%   { transform: translate3d(0,0,0) rotate(0deg) }
  50%  { transform: translate3d(var(--tx,0px), var(--ty,0px), 0) rotate(var(--rot,0deg)) }
  100% { transform: translate3d(0,0,0) rotate(0deg) }
}

/* класс, который включает анимацию одной фазы */
.card.shuffle-phase .card-inner{
  animation: shuffle var(--dur,1200ms) var(--delay,0ms) cubic-bezier(.22,1,.36,1) both;
}


/* победитель: полноэкранный вид и переворот */
.overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.76); z-index:1200; display:flex;align-items:center;justify-content:center;
}
.modal{
  width:min(920px,92vw);
  max-height:86vh;
  padding:28px;
  background: linear-gradient(180deg,#0f1112,#131416);
  border-radius:14px;
  color:#fff;
  display:flex;flex-direction:column;gap:18px;
  box-shadow:0 30px 80px rgba(0,0,0,.7);
  transform-style:preserve-3d;
}

/* крупный текст задания в модалке */
.modal .task{
  font-size:20px; line-height:1.4;
}

/* Кнопки модалки */
.modal .row{display:flex;gap:12px;justify-content:flex-end}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,.06);color:var(--muted);padding:10px 14px;border-radius:10px;cursor:pointer}
.btn-confirm{background:var(--accent);color:#000;padding:10px 14px;border-radius:10px;cursor:pointer}

/* История */
.history-wrap{margin-top:28px}
.history{max-width:760px;margin:12px auto 80px;padding-left:18px;color:var(--muted);line-height:1.6}
.history li{padding:8px 0;border-left:3px solid rgba(212,175,55,.07);padding-left:12px}

/* адаптив */
@media (max-width:720px){
  .card{height:150px}
  .btn{padding:12px 20px}
}
/* модалка с результатом — красиво, как карточка */
.overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.7);
  z-index: 1200;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal{
  width: min(900px, 90vw);
  max-height: 80vh;
  background: linear-gradient(145deg,#1e1e24,#121216);
  border-radius: 16px;
  color: #fff;
  display: flex;
  flex-direction: column;
  gap: 18px;
  padding: 28px;
  box-shadow: 0 30px 80px rgba(0,0,0,.7);
}

.modal .task{
  font-size: 22px;
  line-height: 1.4;
  text-align: center;
  word-break: break-word;
}

.modal .row{
  display: flex;
  justify-content: center;
  margin-top: 16px;
}



